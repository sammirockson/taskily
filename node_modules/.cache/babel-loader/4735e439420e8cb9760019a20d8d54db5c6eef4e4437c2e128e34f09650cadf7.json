{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NavBar from '@/components/NavBarView.vue';\nimport DraggableView from 'vuedraggable';\nimport CardView from '@/views/CardView.vue';\nimport BoardNavItemsView from './BoardNavItemsView.vue';\nimport APIService from '@/APIService';\nimport { ref } from 'vue';\nimport CryptoJS from 'crypto-js';\nimport { BASE_URL, USER_CACHE_KEY } from '@/config';\nimport axios from 'axios';\nexport default {\n  inject: [\"eventBus\", \"cryptojs\"],\n  props: [\"isExpanded\"],\n  components: {\n    NavBar,\n    CardView,\n    DraggableView,\n    BoardNavItemsView\n  },\n  setup() {\n    var isSideBarExpanded = ref(true);\n    var board = ref([]);\n    var isCardTapped = ref(false);\n    var newCardName = ref(\"\");\n    var newListName = ref(\"\");\n    var boardId = ref(\"\");\n    var selectedCard = ref(Object);\n    var selectedList = ref(Object);\n    var allCards = ref([]);\n    var isSavingCard = ref(false);\n    var allBoardTags = ref([]);\n    var isRefreshBoard = ref(true);\n    var currentUser = ref(null);\n    var dblists = ref([]);\n    var allLists = ref([]);\n    return {\n      isSideBarExpanded,\n      board,\n      dblists,\n      allLists,\n      newCardName,\n      newListName,\n      isCardTapped,\n      currentUser,\n      boardId,\n      selectedCard,\n      selectedList,\n      allCards,\n      isSavingCard,\n      allBoardTags,\n      isRefreshBoard\n    };\n  },\n  methods: {\n    handleSearchBoard(searchText) {\n      if (searchText.length > 0) {\n        var searchLists = [];\n        let searchKey = searchText.toLowerCase();\n        searchLists = this.allLists;\n        for (var index in searchLists) {\n          let list = searchLists[index];\n          if (list != undefined) {\n            console.log('list: ', list);\n            let cards = list.cards;\n            let cardFilter = cards.filter(card => card.cardName.toLowerCase().includes(searchKey));\n            if (cardFilter.length > 0) {\n              searchLists[index].cards = cardFilter;\n            } else {\n              searchLists = searchLists.filter(x => x._id !== list._id);\n            }\n          }\n        }\n        console.log(\"handle search: \", searchText.length, 'searchLists card count: ');\n        this.board.lists = searchLists;\n      } else {\n        this.getBoardBy(this.boardId);\n      }\n    },\n    isBtmViewVisible(list) {\n      return list.headerType == 'addList' || list.headerType == 'creatingList' ? false : true;\n    },\n    getCardTags(card) {\n      let tagIds = card.selectedTags;\n      return this.allBoardTags.filter(tag => tagIds.includes(tag.id));\n    },\n    listNameTextAreaGrow(listId) {\n      let element = document.getElementById(listId); // cardNameId\n      if (element != null) {\n        element.style.height = element.scrollHeight + \"px\";\n      }\n      let contId = \"headerMotherContainer_\" + listId;\n      let badgeAndTitleContainer = document.getElementById(contId);\n      if (badgeAndTitleContainer != null) {\n        badgeAndTitleContainer.style.height = element.scrollHeight + 30 + \"px\";\n      }\n    },\n    async didEditListName(listName, list_id, listId) {\n      console.log(\"didEditListName: \", listName);\n      var params = {\n        list_id: list_id,\n        listName: listName\n      };\n      var fullURL = BASE_URL + \"board/updateListName\";\n      await axios.post(fullURL, params).then(response => {\n        if (response.data != null) {\n          let data = response.data;\n          console.log(\"list update resp data: \", data);\n          let contId = \"headerMotherContainer_\" + listId;\n          let badgeAndTitleContainer = document.getElementById(contId);\n          console.log(\"lstid: \", contId, \"element: \", badgeAndTitleContainer == null);\n          if (badgeAndTitleContainer != null) {\n            badgeAndTitleContainer.style.height = \"60px\";\n          }\n        }\n      });\n    },\n    sortedCards(cards) {\n      return cards.length > 0 ? cards.sort((a, b) => a.position - b.position) : cards;\n    },\n    async setListEmpty(listId) {\n      var params = {\n        listId: listId\n      };\n      var fullURL = BASE_URL + \"board/setEmptyList\";\n      await axios.post(fullURL, params).then(response => {\n        if (response.data != null) {\n          let data = response.data;\n          console.log(\"resp data: \", data);\n          if (data.statusCode == 200) {\n            console.log(\"list and card info updated: \", data.resp);\n          }\n        }\n      });\n    },\n    async updateBoardInfo(cards, cardIds, list_id, listId) {\n      var params = {\n        cards: cards,\n        cardIds: cardIds,\n        listId: listId,\n        list_id: list_id\n      };\n      var fullURL = BASE_URL + \"board/updateList\";\n      await axios.post(fullURL, params).then(response => {\n        if (response.data != null) {\n          let data = response.data;\n          if (data.statusCode == 200) {\n            console.log(\"list and card info updated: \", data.resp);\n          }\n        }\n      });\n    },\n    onCardMoved(e) {\n      console.log(\"onCardMoved: \", e);\n      let item = e.added || e.removed || e.moved;\n      if (e.removed != null) {\n        // Removed: removed from one list to another\n        for (var listIndex in this.board.lists) {\n          var list = this.board.lists[listIndex];\n          let list_id = list._id;\n          let listId = list.id;\n          if (list.cards.length > 0) {\n            var cards = [];\n            var cardIds = [];\n            for (var cardPosition in list.cards) {\n              let card = list.cards[cardPosition];\n              card.position = cardPosition;\n              cardIds.push(card.id);\n              cards.push({\n                id: card.id,\n                position: cardPosition\n              });\n            }\n            this.updateBoardInfo(cards, cardIds, list_id, listId);\n          } else {\n            // set list empty\n            this.setListEmpty(list_id);\n          }\n        }\n        // this.getBoardBy(this.boardId)\n      }\n      if (e.moved != null) {\n        // moved: moved within the same list\n        let listId = e.moved.element.listId;\n        console.log(\"moved: \", e.moved.element, \"listId: \", listId);\n        let listIndex = this.board.lists.findIndex(x => x.id === listId);\n        let list = this.board.lists[listIndex];\n        let list_id = list._id;\n        var cards = [];\n        var cardIds = [];\n        for (var cardPosition in list.cards) {\n          let card = list.cards[cardPosition];\n          card.position = cardPosition;\n          cardIds.push(card.id);\n          cards.push({\n            id: card.id,\n            position: cardPosition\n          });\n        }\n        this.updateBoardInfo(cards, cardIds, list_id, listId);\n      }\n    },\n    handleOverlayDismissed() {\n      this.isRefreshBoard = true;\n      this.$router.go(-1);\n      // this.getBoardBy(this.boardId)\n    },\n    handleCardTapped(card, list) {\n      let path = \"/b/\" + this.boardId;\n      this.$router.push({\n        path: path,\n        query: {\n          card: card._id\n        }\n      });\n    },\n    async createANewList(list, index) {\n      // Create List\n      var params = {\n        listName: this.newListName,\n        boardId: this.boardId,\n        isAddCard: true,\n        isCreateList: false,\n        headerType: \"showListName\",\n        id: Date.now(),\n        owner: \"1721545684258\"\n      };\n      var fullURL = BASE_URL + \"board/newList\";\n      console.log(\"full url: \", fullURL, \"params: \", params);\n      await axios.post(fullURL, params).then(response => {\n        if (response.data != null) {\n          let data = response.data;\n          console.log(\"resp data: \", data);\n          if (data.statusCode == 200) {\n            console.log(\"created new list: \", data.resp);\n            this.getBoardBy(this.boardId);\n          }\n        }\n      });\n      this.newListName = \"\";\n    },\n    handleAddList(list, index) {\n      list.isCreateList = true;\n      list.headerType = \"creatingList\";\n      this.board.lists[index] = list;\n    },\n    dynamicTextArea(index) {\n      let element = document.getElementById(\"createNewListField_id\");\n      element.style.height = \"15px\";\n      element.style.height = element.scrollHeight + \"px\";\n    },\n    autoGrow(index, list) {\n      let element = document.getElementById(`newCardField_` + index);\n      element.style.height = \"15px\";\n      element.style.height = element.scrollHeight + \"px\";\n    },\n    async handleCreateCard(list, index) {\n      var params = {\n        cardName: this.newCardName,\n        boardId: this.boardId,\n        listId: list.id,\n        id: Date.now(),\n        owner: \"1721545684258\"\n      };\n      var fullURL = BASE_URL + \"board/newCard\";\n      console.log(\"full url: \", fullURL, \"params: \", params);\n      await axios.post(fullURL, params).then(response => {\n        if (response.data != null) {\n          let data = response.data;\n          console.log(\"card resp data: \", data);\n          if (data.statusCode == 200) {\n            console.log(\"created new card: \", data.resp);\n            this.getBoardBy(this.boardId);\n          }\n        }\n      });\n      this.newCardName = \"\";\n    },\n    handleAddCard(list, index) {\n      list.isCreateCard = true;\n      this.board[index] = list;\n\n      // let bottomViewId = 'bottomView_' + list._id\n      // let bottomView = document.getElementById(bottomViewId)\n      // let bottomViewHeight = element.scrollHeight + 100\n      // bottomView.style.height = (300) + \"px\";\n\n      setTimeout(() => {\n        let listBgViewId = \"listBgView\" + list._id;\n        var myDiv = document.getElementById(listBgViewId);\n        myDiv.scrollTop = myDiv.scrollHeight + 200;\n      }, 500);\n    },\n    async getBoardBy(boardId) {\n      console.log(\"my current current current current user: \", this.currentUser);\n      if (this.currentUser == null) {\n        this.$router.push({\n          path: '/home'\n        });\n      } else {\n        let userId = this.currentUser.id;\n        this.isCardTapped = false;\n        var params = {\n          boardId: boardId\n        };\n        let boardResp = await APIService.getBoardById(params);\n        let apiBoard = boardResp.board;\n        this.allBoardTags = boardResp.tags;\n        console.log(\"apiBoard apiBoard apiBoard: \", apiBoard);\n        if (apiBoard === undefined) {\n          console.log('go home because undefined', apiBoard);\n          this.$router.push({\n            path: '/boards'\n          });\n        } else {\n          let members = apiBoard.members.filter(member => member == userId);\n          console.log(\"members: \", members, \"userId: \", userId);\n          if (members.length > 0) {\n            apiBoard.lists.push({\n              id: \"listPlaceholder\",\n              listName: \"Add New List\",\n              headerType: \"addList\",\n              footerType: \"add\",\n              isAddCard: false,\n              isCreateList: false,\n              cards: []\n            });\n            apiBoard.lists.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));\n            for (var listIndex in apiBoard.lists) {\n              let cards = this.sortedCards(apiBoard.lists[listIndex].cards);\n              apiBoard.lists[listIndex].cards = cards;\n              this.allCards.push(cards);\n            }\n            this.allLists = apiBoard.lists;\n            this.dblists = apiBoard.lists;\n            this.board = apiBoard;\n            console.log('dblists card count: ', this.dblists.map(x => x.cards.length));\n          } else {\n            console.log(\"You're not part of this board, request invitation from the owner\");\n            this.$router.push({\n              path: '/boards'\n            });\n          }\n        }\n      }\n    },\n    async getCardBy(card_id) {\n      var params = {\n        card_id: card_id\n      };\n      var fullURL = BASE_URL + \"board/getCardDetail\";\n      await axios.post(fullURL, params).then(response => {\n        if (response.data != null) {\n          let data = response.data;\n          console.log(\"card data: \", data);\n          if (data.statusCode == 200) {\n            let resp = data.resp;\n            if (resp != null) {\n              this.selectedCard = resp.card;\n              this.selectedList = resp.list;\n              this.cardTags = resp.tags;\n              this.isCardTapped = true;\n              this.$emit('cardDetailInfo', resp);\n            }\n          }\n        }\n      });\n    }\n  },\n  watch: {\n    '$route'() {\n      console.log(\"routed called\");\n      this.getBoardBy(this.boardId);\n    }\n  },\n  mounted() {\n    APIService.init();\n    let routeParams = this.$route.params;\n    console.log(\"main routeParams: \", routeParams);\n    let userCacheString = localStorage.getItem(USER_CACHE_KEY);\n    if (userCacheString != null && userCacheString.length > 0) {\n      let userCache = JSON.parse(userCacheString);\n      let decryptionToken = userCache.token;\n      let encryptedUserData = userCache.user;\n      let decryptedData = CryptoJS.AES.decrypt(encryptedUserData, decryptionToken).toString(CryptoJS.enc.Utf8);\n      let cacheInfoObject = JSON.parse(decryptedData);\n      this.currentUser = cacheInfoObject.user;\n    }\n    this.boardId = routeParams.boardId;\n    this.getBoardBy(this.boardId);\n  }\n};","map":{"version":3,"names":["NavBar","DraggableView","CardView","BoardNavItemsView","APIService","ref","CryptoJS","BASE_URL","USER_CACHE_KEY","axios","inject","props","components","setup","isSideBarExpanded","board","isCardTapped","newCardName","newListName","boardId","selectedCard","Object","selectedList","allCards","isSavingCard","allBoardTags","isRefreshBoard","currentUser","dblists","allLists","methods","handleSearchBoard","searchText","length","searchLists","searchKey","toLowerCase","index","list","undefined","console","log","cards","cardFilter","filter","card","cardName","includes","x","_id","lists","getBoardBy","isBtmViewVisible","headerType","getCardTags","tagIds","selectedTags","tag","id","listNameTextAreaGrow","listId","element","document","getElementById","style","height","scrollHeight","contId","badgeAndTitleContainer","didEditListName","listName","list_id","params","fullURL","post","then","response","data","sortedCards","sort","a","b","position","setListEmpty","statusCode","resp","updateBoardInfo","cardIds","onCardMoved","e","item","added","removed","moved","listIndex","cardPosition","push","findIndex","handleOverlayDismissed","$router","go","handleCardTapped","path","query","createANewList","isAddCard","isCreateList","Date","now","owner","handleAddList","dynamicTextArea","autoGrow","handleCreateCard","handleAddCard","isCreateCard","setTimeout","listBgViewId","myDiv","scrollTop","userId","boardResp","getBoardById","apiBoard","tags","members","member","footerType","createdAt","map","getCardBy","card_id","cardTags","$emit","watch","$route","mounted","init","routeParams","userCacheString","localStorage","getItem","userCache","JSON","parse","decryptionToken","token","encryptedUserData","user","decryptedData","AES","decrypt","toString","enc","Utf8","cacheInfoObject"],"sources":["/Users/Sam.Agyemang/Desktop/Dev/taskily/src/components/BoardContentView.vue"],"sourcesContent":["<template>\n    <div>\n        <!-- <NavBar :isExpanded=\"this.isSideBarExpanded\"/> -->\n        <BoardNavItemsView class=\"boardBNavBar\" :boardId=\"this.board.id\" :boardName=\"this.board.name\" @handleSearchBoard=\"handleSearchBoard\"></BoardNavItemsView>\n        <div class=\"mainBoardConentView\">\n            <div class=\"boardListsContainer\" id=\"boardListsContainer\">\n                 <div v-if=\"this.board != null\" class=\"listContainer\" id=\"listContainer\"v-for=\"(list, index) in this.board.lists\" :key=\"list.id\">\n                    <div class=\"createNewList\" :style=\"{display: list.headerType ==  `creatingList` ? 'flex' : 'none'}\">\n                            <textarea name=\"text\" v-model=\"newListName\" @input=\"dynamicTextArea(index)\" placeholder=\"Create New List\" class=\"createNewListField\" id=\"createNewListField_id\"></textarea>\n                            <button v-if=\"isSavingCard\" class=\"addListBtn buttonload\">\n                               <i class=\"fa fa-circle-o-notch fa-spin\"></i> Creating... \n                            </button>\n                           <button v-else class=\"addListBtn\" @click=\"createANewList(list, index)\">Create List</button>\n                    </div>\n                    <div class=\"listFooterView\" @click=\"handleAddList(list, index)\" :style=\"{display: list.headerType ==  `addList` ? 'flex' : 'none'}\">\n                        <span id=\"addIcon\" class=\"material-symbols-outlined\">add</span>\n                        <div class=\"footerTitleContainer\">\n                            <button class=\"addCardLabel\">New List</button>\n                        </div>\n                     </div>\n                     <div class=\"listHeaderView\" :id=\"`headerMotherContainer_` + list.id\" :style=\"{display: list.headerType ==  `showListName` ? 'flex' : 'none'}\">\n                         <div class=\"badgeAndTitleContainer\">\n                            <div class=\"colorBadge\"></div>\n                            <textarea type=\"text\" v-on:blur=\"didEditListName(list.listName, list._id, list.id)\"  @input=\"listNameTextAreaGrow(list.id)\" class=\"cardNameField\" :id=\"list.id\" v-model=\"list.listName\"></textarea>\n                         </div>\n                         <img src=\"@/assets/three_dots.png\" class=\"listNameLabel\"></img>\n                     </div>\n                     <div class=\"listBackgroundView\" :id=\"'listBgView' + list._id\" v-if=\"this.isBtmViewVisible(list)\">\n                     <div class=\"cardAndFooterContainer\">\n                        <!-- <RouterLink :to=\"`/b` + this.board._id + `/c` +  card._id\"  style=\"text-decoration: none; color: inherit;\"> -->\n                        <DraggableView v-model=\"list.cards\" \n                             group=\"allCards\" \n                             item-key=\"id\"\n                             drag-class=\"drag\"\n                             ghost-class=\"ghost\"\n                             @change=\"onCardMoved\">\n                           <template #item=\"{element}\">\n                            <CardView :card=\"element\" :boardId=\"this.board.id\" :tags=\"this.getCardTags(element)\"></CardView>\n                           </template>\n                       </DraggableView>\n                      <!-- </RouterLink> -->\n                        <div v-if=\"list.isCreateCard == true\" class=\"createListContainer\">\n                            <textarea name=\"text\" v-model=\"newCardName\" @input=\"autoGrow(index)\" placeholder=\"Give your card a name\" class=\"addListInputField\" :id=\"`newCardField_` + index\"></textarea>\n                            <button v-if=\"isSavingCard\" class=\"addListBtn buttonload\">\n                               <i class=\"fa fa-circle-o-notch fa-spin\"></i> Adding... \n                            </button>\n                           <button v-else class=\"addListBtn\" @click=\"handleCreateCard(list, index)\">Add Card</button>\n                        </div>\n                      <!-- <div v-else v-if=\"list.cards != null && list.cards.length > 0 || list.isAddCard == true\" class=\"listFooterView\" @click=\"handleAddCard(list, index)\">\n                        <span id=\"addIcon\" class=\"material-symbols-outlined\">add</span>\n                        <div class=\"footerTitleContainer\">\n                            <button class=\"addCardLabel\">New Card</button>\n                        </div>\n                       </div> -->\n                        \n                      \n                    </div>\n                    \n                 </div>\n                   <div class=\"bottomView\" :id=\"'bottomView_' + list._id\" v-if=\"this.isBtmViewVisible(list)\">\n                       <div v-if=\"list.isCreateCard == true\" class=\"createListTipFooterView\">\n                            <!-- <textarea name=\"text\" v-model=\"newCardName\" @input=\"autoGrow(index, list)\" placeholder=\"Give your card a name\" class=\"addListInputField\" :id=\"`newCardField_` + index\"></textarea>\n                            <button v-if=\"isSavingCard\" class=\"addListBtn buttonload\">\n                               <i class=\"fa fa-circle-o-notch fa-spin\"></i> Adding... \n                            </button>\n                           <button v-else class=\"addListBtn\" @click=\"handleCreateCard(list, index)\">Add Card</button> -->\n                        </div>\n                      <div v-else v-if=\"list.cards != null && list.cards.length > 0 || list.isAddCard == true || list.isCreateCard == true\" class=\"listFooterView\" @click=\"handleAddCard(list, index)\">\n                        <span id=\"addIcon\" class=\"material-symbols-outlined\">add</span>\n                        <div class=\"footerTitleContainer\">\n                            <button class=\"addCardLabel\">New Card</button>\n                        </div>\n                       </div>\n                   </div>\n                </div>\n\n                \n           </div>\n        </div>\n        <RouterView/>\n    </div>\n</template>\n<script>\nimport NavBar from '@/components/NavBarView.vue'\nimport DraggableView from 'vuedraggable'\nimport CardView from '@/views/CardView.vue'\nimport BoardNavItemsView from './BoardNavItemsView.vue'\nimport APIService from '@/APIService';\n\nimport { ref } from 'vue'\nimport CryptoJS from 'crypto-js'\nimport { BASE_URL, USER_CACHE_KEY } from '@/config'\nimport axios from 'axios';\n\nexport default {\n    inject: [\"eventBus\", \"cryptojs\"],\n    props: [\"isExpanded\"],\n    components: {\n        NavBar, CardView, DraggableView, BoardNavItemsView\n    }, \n    setup() {\n        var isSideBarExpanded = ref(true)\n        var board = ref([])\n        var isCardTapped = ref(false)\n        var newCardName = ref(\"\")\n        var newListName = ref(\"\")\n        var boardId = ref(\"\")\n        var selectedCard = ref(Object)\n        var selectedList = ref(Object)\n        var allCards = ref([])\n        var isSavingCard = ref(false)\n        var allBoardTags = ref([])\n        var isRefreshBoard = ref(true)\n        var currentUser = ref(null)\n        var dblists = ref([])\n        var allLists = ref([])\n        return { \n            isSideBarExpanded, board, dblists, allLists, newCardName, newListName, isCardTapped, currentUser,\n            boardId, selectedCard, selectedList, allCards, isSavingCard, allBoardTags, isRefreshBoard\n        }\n    },\n    methods: {\n        handleSearchBoard(searchText) {\n            if (searchText.length > 0) {\n               var searchLists = []\n               let searchKey = searchText.toLowerCase()\n               searchLists = this.allLists\n               for (var index in searchLists) {\n                  let list = searchLists[index]\n                  if (list != undefined) {\n                    console.log('list: ', list)\n                  let cards = list.cards\n                  let cardFilter = cards.filter(card => card.cardName.toLowerCase().includes(searchKey))\n                  if (cardFilter.length > 0) {\n                    searchLists[index].cards = cardFilter\n                  } else {\n                    searchLists = searchLists.filter(x => x._id !== list._id)\n                  }\n                  }\n               }\n               console.log(\"handle search: \", searchText.length, 'searchLists card count: ')\n               this.board.lists = searchLists\n            } else {\n                this.getBoardBy(this.boardId) \n            }\n        },\n        isBtmViewVisible(list) {\n            return list.headerType ==  'addList'  || list.headerType == 'creatingList' ? false : true\n        },\n        getCardTags(card) {\n            let tagIds = card.selectedTags\n            return this.allBoardTags.filter( tag => tagIds.includes(tag.id));\n        },\n        listNameTextAreaGrow(listId) {\n            let element = document.getElementById(listId) // cardNameId\n            if (element != null) {\n                element.style.height = (element.scrollHeight) + \"px\";\n            }\n\n            let contId = \"headerMotherContainer_\" + listId\n            let badgeAndTitleContainer = document.getElementById(contId) \n            if (badgeAndTitleContainer != null ) {\n                badgeAndTitleContainer.style.height = (element.scrollHeight + 30) + \"px\";\n            }\n        },\n     async didEditListName(listName, list_id, listId) {\n        console.log(\"didEditListName: \", listName)\n        var params = {\n            list_id: list_id, \n            listName: listName, \n         }\n         var fullURL = BASE_URL + \"board/updateListName\"\n         await axios.post(fullURL, params).then((response) => {\n          if (response.data != null) {\n             let data = response.data\n             console.log(\"list update resp data: \", data)\n             let contId = \"headerMotherContainer_\" + listId\n            let badgeAndTitleContainer = document.getElementById(contId) \n            console.log(\"lstid: \", contId, \"element: \", badgeAndTitleContainer == null)\n            if (badgeAndTitleContainer != null ) {\n                badgeAndTitleContainer.style.height = \"60px\";\n            }\n            }\n          })\n        },\n        sortedCards(cards) {\n            return cards.length > 0 ? cards.sort((a,b)=> a.position - b.position) : cards\n        },\n        async setListEmpty(listId) {\n         var params = {\n            listId: listId\n        }\n        var fullURL = BASE_URL + \"board/setEmptyList\"\n        await axios.post(fullURL, params).then((response) => {\n          if (response.data != null) {\n            let data = response.data\n            console.log(\"resp data: \", data)\n            if (data.statusCode == 200) {\n                console.log(\"list and card info updated: \", data.resp)\n              }\n             }\n          })\n        },\n       async updateBoardInfo(cards, cardIds, list_id, listId) {\n        var params = {\n            cards: cards, \n            cardIds: cardIds, \n            listId: listId, \n            list_id: list_id\n        }\n        var fullURL = BASE_URL + \"board/updateList\"\n        await axios.post(fullURL, params).then((response) => {\n          if (response.data != null) {\n            let data = response.data\n            if (data.statusCode == 200) {\n                console.log(\"list and card info updated: \", data.resp)\n              }\n             }\n          })\n      },\n      onCardMoved(e) {\n       console.log(\"onCardMoved: \", e) \n       let item = e.added || e.removed || e.moved; \n       if (e.removed != null) { // Removed: removed from one list to another\n        for (var listIndex in this.board.lists) {\n          var list = this.board.lists[listIndex]\n          let list_id = list._id\n          let listId = list.id\n          if (list.cards.length > 0) {\n            var cards = []\n            var cardIds = []\n             for (var cardPosition in list.cards) {\n                let card = list.cards[cardPosition]\n                card.position = cardPosition\n                cardIds.push(card.id)\n                cards.push({id: card.id, position: cardPosition})\n             }\n             this.updateBoardInfo(cards, cardIds, list_id, listId)\n          } else {\n            // set list empty\n            this.setListEmpty(list_id)\n          }\n        }\n        // this.getBoardBy(this.boardId)\n      }\n\n      if (e.moved != null) { // moved: moved within the same list\n        let listId = e.moved.element.listId\n        console.log(\"moved: \", e.moved.element, \"listId: \", listId)\n        let listIndex = this.board.lists.findIndex(x => x.id === listId);\n        let list = this.board.lists[listIndex]\n        let list_id = list._id\n        var cards = []\n        var cardIds = []\n        for (var cardPosition in list.cards) {\n            let card = list.cards[cardPosition]\n            card.position = cardPosition\n            cardIds.push(card.id)\n            cards.push({id: card.id, position: cardPosition})\n        }\n        this.updateBoardInfo(cards, cardIds, list_id, listId)\n      }\n    },\n        handleOverlayDismissed() {\n            this.isRefreshBoard = true\n            this.$router.go(-1)\n            // this.getBoardBy(this.boardId)\n        },\n        handleCardTapped(card, list) {\n            let path = \"/b/\" + this.boardId\n            this.$router.push(\n                {\n                    path: path, \n                    query: {\n                        card: card._id\n                    }\n                })\n        },\n      async createANewList(list, index) {\n        // Create List\n        var params = {\n          listName: this.newListName,\n          boardId: this.boardId,\n          isAddCard: true, \n          isCreateList: false,\n          headerType: \"showListName\",\n          id: Date.now(), \n          owner: \"1721545684258\"\n        }\n        var fullURL = BASE_URL + \"board/newList\"\n        console.log(\"full url: \", fullURL, \"params: \", params)\n        await axios.post(fullURL, params).then((response) => {\n          if (response.data != null) {\n            let data = response.data\n            console.log(\"resp data: \", data)\n            if (data.statusCode == 200) {\n                console.log(\"created new list: \", data.resp)\n                this.getBoardBy(this.boardId)\n              }\n             }\n          })\n          this.newListName = \"\"\n    },\n        handleAddList(list, index) {\n            list.isCreateList = true \n            list.headerType = \"creatingList\"\n            this.board.lists[index] = list\n        },\n        dynamicTextArea(index) {\n            let element = document.getElementById(\"createNewListField_id\")\n            element.style.height = \"15px\";\n            element.style.height = (element.scrollHeight) + \"px\";\n        },\n        autoGrow(index, list) {\n            let element = document.getElementById(`newCardField_` + index)\n            element.style.height = \"15px\";\n            element.style.height = (element.scrollHeight) + \"px\";\n        },\n       async handleCreateCard(list, index) {\n          var params = {\n             cardName: this.newCardName,\n             boardId: this.boardId,\n             listId: list.id,\n             id: Date.now(), \n             owner: \"1721545684258\"\n         }\n         var fullURL = BASE_URL + \"board/newCard\"\n         console.log(\"full url: \", fullURL, \"params: \", params)\n         await axios.post(fullURL, params).then((response) => {\n          if (response.data != null) {\n            let data = response.data\n            console.log(\"card resp data: \", data)\n            if (data.statusCode == 200) {\n                console.log(\"created new card: \", data.resp)\n                this.getBoardBy(this.boardId)\n              }\n             }\n          })\n          this.newCardName = \"\"\n        },\n        handleAddCard(list, index) {\n            list.isCreateCard = true \n            this.board[index] = list\n\n            // let bottomViewId = 'bottomView_' + list._id\n            // let bottomView = document.getElementById(bottomViewId)\n            // let bottomViewHeight = element.scrollHeight + 100\n            // bottomView.style.height = (300) + \"px\";\n\n            setTimeout(()=>{\n                let listBgViewId = \"listBgView\" + list._id\n                var myDiv = document.getElementById(listBgViewId);\n                myDiv.scrollTop = myDiv.scrollHeight + 200;\n            }, 500)\n        }, \n     async getBoardBy(boardId) {\n        console.log(\"my current current current current user: \", this.currentUser)\n        if (this.currentUser == null) {\n            this.$router.push({path: '/home'}) \n        } else {\n        let userId = this.currentUser.id\n        this.isCardTapped = false\n        var params = {\n            boardId: boardId\n        }\n        let boardResp = await APIService.getBoardById(params)\n        let apiBoard = boardResp.board\n        this.allBoardTags = boardResp.tags\n        console.log(\"apiBoard apiBoard apiBoard: \", apiBoard)\n        if (apiBoard === undefined) {\n            console.log('go home because undefined', apiBoard)\n            this.$router.push({path: '/boards'}) \n        } else {\n            let members = apiBoard.members.filter(member => member == userId)\n            console.log(\"members: \", members, \"userId: \", userId)\n            if (members.length > 0 ) {\n                apiBoard.lists.push({ id: \"listPlaceholder\", listName: \"Add New List\", headerType: \"addList\", footerType: \"add\", isAddCard: false, isCreateList: false, cards: []})\n                apiBoard.lists.sort((a,b)=> new Date(a.createdAt) - new Date(b.createdAt))\n               for (var listIndex in apiBoard.lists) {\n                 let cards = this.sortedCards(apiBoard.lists[listIndex].cards)\n                 apiBoard.lists[listIndex].cards = cards\n                 this.allCards.push(cards)\n                }\n               this.allLists = apiBoard.lists\n               this.dblists = apiBoard.lists\n               this.board = apiBoard\n               console.log('dblists card count: ', this.dblists.map(x => x.cards.length))\n            } else {\n                console.log(\"You're not part of this board, request invitation from the owner\")\n                this.$router.push({path: '/boards'}) \n            }\n        }\n      }\n    }, \n     async getCardBy(card_id) {\n        var params = {\n            card_id: card_id\n        }\n        var fullURL = BASE_URL + \"board/getCardDetail\"\n        await axios.post(fullURL, params).then((response) => {\n          if (response.data != null) {\n            let data = response.data\n            console.log(\"card data: \", data)\n            if (data.statusCode == 200) {\n                let resp = data.resp\n                if (resp != null) {\n                   this.selectedCard = resp.card\n                   this.selectedList = resp.list\n                   this.cardTags = resp.tags\n                   this.isCardTapped = true \n                   this.$emit('cardDetailInfo', resp)\n                }\n                \n              }\n             }\n          })\n        }\n    },\n    watch: { \n        '$route' () {\n          console.log(\"routed called\")\n          this.getBoardBy(this.boardId)\n        }\n    },  \n    mounted() {\n        APIService.init()\n        let routeParams = this.$route.params\n        console.log(\"main routeParams: \", routeParams)\n       let userCacheString = localStorage.getItem(USER_CACHE_KEY)\n       if (userCacheString != null && userCacheString.length > 0) {\n        let userCache = JSON.parse(userCacheString)\n        let decryptionToken = userCache.token\n        let encryptedUserData = userCache.user\n        let decryptedData = CryptoJS.AES.decrypt(encryptedUserData, decryptionToken).toString(CryptoJS.enc.Utf8)\n        let cacheInfoObject = JSON.parse(decryptedData)\n        this.currentUser = cacheInfoObject.user\n       }\n       \n        this.boardId = routeParams.boardId\n        this.getBoardBy(this.boardId)\n    },\n}\n</script>\n<style scoped>\n.drag {\n  transform: rotate(5deg);\n}\n \n.ghost {\n  background: lightgray;\n  border-radius: 6px;\n}\n.ghost {\n  visibility: hidden;\n}\n\n.boardInfoView label {\n    font-weight: 500;\n    font-size: 10px;\n    margin-right: 8px;\n    margin-left: 1px;\n}\n.boardIcon {\n    width: 15px;\n    height: 15px;\n}\n.boardInfoView {\n    display: flex;\n    width: 120px;\n    height: 50px;\n    justify-content: space-evenly;\n    margin-top: 5px;\n}\n\n.cardNameLabel {\n    width: 200px;\n    margin-top: 8px;\n    margin-left: 10px;\n    margin-right: 10px;\n    font-weight: 700;\n    font-size: 13px;\n    text-align: left;\n    white-space: pre-wrap;\n}\n\n.footerTitleContainer {\n    width: auto;\n    height: 24px;\n    margin-top: 12px;\n    overflow: hidden;\n}\n#addIcon {\n    padding: 0;\n    margin: 0;\n    margin-top: 12px;\n    font-weight: 700;\n    color: var(--color-card-title);\n}\n\n.addCardLabel {\n    margin: 0;\n    padding: 0;\n    font-weight: 600;\n    font-size: 15px;\n    margin-left: 4px;\n    color: var(--color-card-title);\n}\n.cardAndFooterContainer {\n    height: 100%;\n    width: 100%;\n    overflow-y: scroll;\n    -webkit-overflow-scrolling: touch;\n    /* padding-bottom: 50px; */\n    -ms-overflow-style: none;  /* Internet Explorer 10+ */\n    scrollbar-width: none;  /* Firefox */\n    padding-top: 8px;\n}\n.listFooterView {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    height: 50px;\n    width: 240px;\n    border-radius: var(--border-radius-2);\n    border: 1px solid var(--color-light);\n    z-index: 9999;\n    overflow: hidden;\n    background-color: var(--color-card-background);\n    /* margin-top: -8px; */\n}\n\n.addListBtn {\n    display: block;\n    width: 100px;\n    height: 34px;\n    background-color: #FC6363;\n    color: white;\n    border-radius: var(--border-radius-1);\n    margin-left: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n.addListInputField, .createNewListField {\n  padding: 8px;\n  width: 200px;\n  margin-left: 8px;\n  margin-right: 8px;\n  border: 1px solid var(--color-light);\n  border-radius: var(--border-radius-1);\n  text-align: left;\n  resize: none;\n  overflow: hidden;\n  height: 40px;\n  max-height: 500px;\n  max-lines: 200;\n  font-weight: 500;\n  font-size: 14px;\n  color: var(--color-dark-blue);\n}\n\n.createListContainer  {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    /* height: 140px; */\n    width: 98%;\n    padding-top: 10px;\n    z-index: 9999;\n    overflow: hidden;\n    background-color: var(--color-card-background);\n    align-items: center;\n    margin-top: 10px;\n    margin-right: auto;\n    margin-left: auto;\n    border-radius: var(--border-radius-2)\n}\n\n.createNewList {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    /* height: 140px; */\n    width: 98%;\n    padding-top: 10px;\n    z-index: 999999;\n    overflow: hidden;\n    background-color: white;\n    align-items: center;\n    margin-right: auto;\n    margin-left: auto;\n    border-radius: var(--border-radius-2)\n}\n\n\n.cardCell {\n    overflow: hidden;\n    width: 220px;\n    min-height: 50px;\n    margin-bottom: 10px;\n    border: 1px solid var(--color-light);\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    border-radius: var(--border-radius-1);\n    /* border-bottom-right-radius: var(--border-radius-2);\n    border-bottom-left-radius: var(--border-radius-2); */\n}\n\n.badgeAndTitleContainer {\n    display: flex;\n    flex-direction: row;\n}\n\n.badgeAndTitleContainer label {\n    margin-left: 10px;\n}\n\n.cardNameField {\n    display: flex;\n    width: 165px;\n    min-height: 30px;\n    margin-top: 17px;\n    font-size: 15px;\n    font-weight: 600;\n    resize: none;\n    color: var(--color-dark);\n    margin-bottom: 20px;\n    margin-left: 8px;\n}\n\n.listNameLabel {\n    height: 24px;\n    font-weight: 600;\n    font-size: 15px;\n    margin-top: auto;\n    margin-bottom: auto;\n}\n.colorBadge {\n    width: 4px;\n    height: 20px;\n    background-color: orange;\n    border-radius: var(--border-radius-1);\n    margin-top: auto;\n    margin-bottom: auto;\n    margin-left: 15px;\n}\n\n.listHeaderView {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 60px;\n    width: 100%;\n    border-radius:  var(--border-radius-2);;\n    /* border-top-right-radius: var(--border-radius-2);\n    border-top-left-radius: var(--border-radius-2); */\n    border: 1px solid var(--color-light);\n    padding-right: 15px;\n    background-color: var(--color-card-background);\n}\n\n\n.boardListsContainer {\n    width: 100%;\n    height: calc(100vh - 70px);\n    white-space: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    -webkit-overflow-scrolling: touch;\n    padding-right: 20px;\n}\n\n.listContainer {\n    width: 220px;\n    float: none;\n    max-height: 100%;\n    position: relative;\n    margin: 0 0.50%;\n    display: inline-block;\n    zoom: 1;\n    overflow: hidden;\n\n    display: table-cell;\n    vertical-align: top;\n    padding-left: 15px;\n}\n\n.listBackgroundView {\n    width: 100%;\n    background-color: var(--color-background);\n    max-height: calc(100vh - 230px);\n    overflow-y: scroll;\n    margin-top: -10px;\n    /* border-bottom-left-radius: var(--border-radius-2);\n    border-bottom-right-radius: var(--border-radius-2); */\n}\n\n.bottomView {\n    min-height: 50px;\n    width: 100%;\n    background-color: var(--color-background);\n    border-bottom-left-radius: var(--border-radius-2);\n    border-bottom-right-radius: var(--border-radius-2);\n}\n\n.mainBoardConentView {\n    width: calc(100% - 10px);\n    height: calc(100% - 50px);\n    margin-left: auto;\n    margin-right: auto;\n    padding-top: 10px;\n}\n\n.boardBNavBar {\n    width: 100%;\n    height: 50px;\n    background-color: rgba(0, 0, 0, 0.2);\n}\n    \n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}