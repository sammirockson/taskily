{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, withKeys as _withKeys, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-a6609522\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"mx-1 my-3 editContainer\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"commandContainer\"\n};\nconst _hoisted_3 = [\"title\", \"onClick\"];\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = [\"innerHTML\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$props.isEditingDesc ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.commands, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"btn-group\"\n    }, [_createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn btn-sm btn-outline-secondary border-0 rounded-0\",\n      \"data-toggle\": \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: item.title,\n      onClick: $event => $options.exec(item.command)\n    }, [_createElementVNode(\"i\", {\n      class: _normalizeClass('fa ' + item.icon)\n    }, null, 2 /* CLASS */)], 8 /* PROPS */, _hoisted_3)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), $props.isEditingDesc ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    class: \"editor mt-2\",\n    id: \"editor\",\n    style: _normalizeStyle({\n      height: $props.editorHeight + 'px'\n    }),\n    onInput: _cache[0] || (_cache[0] = (...args) => this.onInput && this.onInput(...args)),\n    onKeyup: [_cache[1] || (_cache[1] = _withKeys((...args) => $options.onSpaceBar && $options.onSpaceBar(...args), [\"space\"])), _cache[3] || (_cache[3] = _withKeys((...args) => $options.getCurrentTagName && $options.getCurrentTagName(...args), [\"enter\"]))],\n    contenteditable: \"true\",\n    innerHTML: $props.cardDescription,\n    onMouseup: _cache[2] || (_cache[2] = (...args) => $options.getCurrentTagName && $options.getCurrentTagName(...args))\n  }, null, 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_4)) : (_openBlock(), _createElementBlock(\"div\", {\n    key: 2,\n    class: \"editor mt-2\",\n    id: \"editor\",\n    style: _normalizeStyle({\n      height: $props.editorHeight + 'px'\n    }),\n    onInput: _cache[4] || (_cache[4] = (...args) => this.onInput && this.onInput(...args)),\n    onKeyup: [_cache[5] || (_cache[5] = _withKeys((...args) => $options.onSpaceBar && $options.onSpaceBar(...args), [\"space\"])), _cache[7] || (_cache[7] = _withKeys((...args) => $options.getCurrentTagName && $options.getCurrentTagName(...args), [\"enter\"]))],\n    contenteditable: \"false\",\n    innerHTML: $props.cardDescription,\n    onMouseup: _cache[6] || (_cache[6] = (...args) => $options.getCurrentTagName && $options.getCurrentTagName(...args))\n  }, null, 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_5))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","$props","isEditingDesc","_hoisted_2","_Fragment","_renderList","$setup","commands","item","index","_createElementVNode","type","title","onClick","$event","$options","exec","command","_normalizeClass","icon","_hoisted_3","_createCommentVNode","id","style","_normalizeStyle","height","editorHeight","onInput","_cache","args","onKeyup","_withKeys","onSpaceBar","getCurrentTagName","contenteditable","innerHTML","cardDescription","onMouseup","_hoisted_4","_hoisted_5"],"sources":["/Users/Sam.Agyemang/Desktop/Dev/taskily/src/components/TextEditorView.vue"],"sourcesContent":["<template>\n    <div class=\"mx-1 my-3 editContainer\">\n        <div class=\"commandContainer\" v-if=\"isEditingDesc\">\n            <div v-for=\"(item, index) in commands\" :key=\"index\" class=\"btn-group\" >\n            <button type=\"button\" class=\"btn btn-sm btn-outline-secondary border-0 rounded-0\" data-toggle=\"tooltip\" data-placement=\"bottom\" :title=\"item.title\" @click=\"exec(item.command)\">\n                <i :class=\"'fa ' + item.icon\"></i>\n            </button>           \n        </div>\n        </div>\n        <div v-if=\"isEditingDesc\" class=\"editor mt-2\" id=\"editor\" :style=\"{height: editorHeight + 'px'}\" @input=\"this.onInput\" @keyup.space=\"onSpaceBar\"  contenteditable=\"true\" v-html=\"cardDescription\" @mouseup=\"getCurrentTagName\" @keyup.enter=\"getCurrentTagName\"></div>\n        <div v-else class=\"editor mt-2\" id=\"editor\" :style=\"{height: editorHeight + 'px'}\" @input=\"this.onInput\" @keyup.space=\"onSpaceBar\"  contenteditable=\"false\" v-html=\"cardDescription\" @mouseup=\"getCurrentTagName\" @keyup.enter=\"getCurrentTagName\"></div>\n    </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nexport default {\n    name: 'wysiwyg',\n    props: { cardDescription: String, isEditingDesc: Boolean, editorHeight: Number, isComment: Boolean },\n    mounted () {\n        document.getElementById('editor').addEventListener('input', function(){\n          let scrollHeight = this.scrollHeight\n          if (scrollHeight > 340) {\n             this.style.height = scrollHeight + \"px\";\n          }\n       })\n       document.getElementById('editor').addEventListener('keyup', function(){\n           console.log(\"event keyup: \", this)\n       })       \n       this.adjustHeight()\n    },\n    setup() {\n        var currentContent = ref(null)\n        return {\n            commands : [\n                { name: 'Bold', title: 'Bold', command: 'bold', icon: 'fa-bold' },\n\n                { name: 'Italic', title: 'Italic', command: 'italic', icon: 'fa-italic' },\n\n                { name: 'StrikeThrough', title: 'Strike Through', command: 'strikeThrough', icon: 'fa-strikethrough' },\n\n                { name: 'Underline', title: 'Underline', command: 'underline', icon: 'fa-underline' },\n\n                { name: 'AlignLeft', title: 'Align Left', command: 'justifyLeft', icon: 'fa-align-left' },\n\n                { name: 'AlignJustify', title: 'Align Justify', command: 'justifyFull', icon: 'fa-align-justify' },\n\n                { name: 'AlignCenter', title: 'Align Center', command: 'justifyCenter', icon: 'fa-align-center' },\n\n                { name: 'AlignRight', title: 'Align Right', command: 'justifyRight', icon: 'fa-align-right' },\n\n                { name: 'Subscript', title: 'Subscript', command: 'subscript', icon: 'fa-subscript' },\n\n                { name: 'Superscript', title: 'Superscript', command: 'superscript', icon: 'fa-superscript' },\n\n                { name: 'OrderedList', title: 'Ordered List', command: 'insertOrderedList', icon: 'fa-list-ol' },\n\n                { name: 'UnorderdList', title: 'Unorderd List', command: 'insertUnorderedList', icon: 'fa-list-ul' },\n\n                { name: 'Link', title: 'Link', command: 'createLink', icon: 'fa-link' },\n\n                { name: 'RemoveFormat', title: 'Remove Format', command: 'removeFormat', icon: 'fa-times' },\n            ],\n            currentTagName: '', currentContent\n        }\n\n    },\n    mounted() {\n    },\n    watch : {\n        currentTagName() {\n            this.getCurrentTagName()\n        }, \n        isComment() {\n            this.commands.push({ name: 'Attachment', title: 'Attachment', command: 'addAttachment', icon: 'fa-image' })\n        }\n    },\n    methods : {\n        setEndOfContenteditable(el) {\n          let elem = document.getElementById('editor')\n          var range, selection;\n          if (document.createRange){ // Firefox, Chrome, Opera, Safari, IE 9+\n             range = document.createRange();//Create a range (a range is a like the selection but invisible)\n             range.selectNodeContents(elem);//Select the entire contents of the element with the range\n             range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n             selection = window.getSelection();//get the selection object (allows you to change selection)\n             selection.removeAllRanges();//remove any selections already made\n             selection.addRange(range);//make the range you have just created the visible selection\n         } else if(document.selection) { // IE 8 and lower  \n           range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)\n           range.moveToElementText(elem);//Select the entire contents of the element with the range\n           range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n           range.select();//Select the range (make it the visible selection\n         }\n        //   if (el.target.innerHTML.length > 0) {\n        //     let sel = window.getSelection();\n        //     sel.selectAllChildren(el);\n        //     sel.collapseToEnd();\n        //   }\n        },\n        adjustHeight() {\n            setTimeout(()=>{\n             let editorElement = document.getElementById(\"editor\")\n             let scrollHeight = editorElement.scrollHeight\n             editorElement.style.height = scrollHeight + \"px\";\n            }, 0)\n        },\n        formatURL(el) {\n          var text = el.target.innerHTML;\n          var firstAt = text.indexOf('https');\n          console.log(\"firstAt: \", firstAt)\n           if(firstAt > -1) {\n            var textToReplace = text.substring(firstAt, text.length);\n            // onClick=\"window.open('http://www.google.com','_newtab')\n            var newText = \"<a href='#' contenteditable='false'>\" + textToReplace.substring(0, textToReplace.length) + \"</a>\";\n            newText += \"<br>\"\n            var complete = text.replace(textToReplace, newText);\n             el.target.innerHTML = complete\n           }\n           this.setEndOfContenteditable(el)\n        },\n        onSpaceBar(el) {\n          console.log(\"keycode 32 tapped\")\n          this.formatURL(el)\n        },\n        onInput(el) {\n          let isContainAt = el.target.innerHTML.includes(\"@\")\n          if (isContainAt == true) {\n            this.$emit(\"isMemberCardVisible\", true)\n          }\n        },\n        exec (command,arg) {\n            document.execCommand(command , false , arg)\n        },\n        clear () {\n            document.getElementById(\"editor\").innerHTML = ''\n        },\n        borderRight (index) {\n            var clubs = [\n                5,9,13,15,18,20,22,24,26\n            ]\n            return !!clubs.includes(index + 1)\n        },\n        getCurrentTagName(el) {\n            // this.formatURL(el)\n            var text = el.target.innerHTML;\n            var firstAt = text.indexOf('https');\n            var url = text.substring(firstAt, text.length);\n            console.log(\"isURL: \", url)\n            if (url.length > 5) {\n                // open\n                window.open(url,'_newtab')\n            } else {\n                // edit\n                this.$emit(\"isEditing\")\n            }\n            this.adjustHeight()\n            if (window.getSelection().baseNode) {\n                this.currentTagName = window.getSelection().baseNode.parentNode.tagName                 \n            }\n        }, \n        handleURLTapped(url) {\n            console.log(\"url tapped: \", url)\n        }\n    }\n}\n</script>\n\n<style scoped>\n\n.editContainer {\n    padding: 20px;\n}\n.commandContainer {\n    display: flex;\n    justify-content: space-evenly;\n    margin-bottom: 10px;\n}\n.btn-group {\n   display: flex;\n   width: 80px;\n   color: var(--color-card-title);\n}\n.editor {\n    display: flex;\n    flex-direction: column;\n    justify-content: start;\n    align-items: start;\n    font-size: 15px;\n    font-weight: 500;\n    font-family: 'Poppins', Helvetica, Arial, sans-serif;\n    overflow: hidden;\n    overflow-y: scroll;\n    color: var(--color-card-title);\n }\n\n.btn:hover {\n    background: lighten(black, 90%);\n    color: lighten(black, 10%);\n}\n\n[contenteditable]:focus {\n  outline: none;\n}\n\n[contenteditable] {\n    text-align: left;\n    font-size: 15px;\n    font-weight: 500;\n    color: var(--color-card-title);\n    font-family: 'Poppins', Helvetica, Arial, sans-serif;\n}\n\n</style>\n"],"mappings":";;;EACSA,KAAK,EAAC;AAAyB;;EADxCC,GAAA;EAEaD,KAAK,EAAC;;mBAFnB;mBAAA;mBAAA;;uBACIE,mBAAA,CAUM,OAVNC,UAUM,GATkCC,MAAA,CAAAC,aAAa,I,cAAjDH,mBAAA,CAMM,OANNI,UAMM,I,kBALFJ,mBAAA,CAIEK,SAAA,QAPdC,WAAA,CAGyCC,MAAA,CAAAC,QAAQ,EAHjD,CAGyBC,IAAI,EAAEC,KAAK;yBAAxBV,mBAAA,CAIE;MAJsCD,GAAG,EAAEW,KAAK;MAAEZ,KAAK,EAAC;QAC1Da,mBAAA,CAES;MAFDC,IAAI,EAAC,QAAQ;MAACd,KAAK,EAAC,qDAAqD;MAAC,aAAW,EAAC,SAAS;MAAC,gBAAc,EAAC,QAAQ;MAAEe,KAAK,EAAEJ,IAAI,CAACI,KAAK;MAAGC,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,IAAI,CAACR,IAAI,CAACS,OAAO;QACzKP,mBAAA,CAAkC;MAA9Bb,KAAK,EALzBqB,eAAA,SAKmCV,IAAI,CAACW,IAAI;6CAL5CC,UAAA,E;sCAAAC,mBAAA,gBASmBpB,MAAA,CAAAC,aAAa,I,cAAxBH,mBAAA,CAAsQ;IAT9QD,GAAA;IASkCD,KAAK,EAAC,aAAa;IAACyB,EAAE,EAAC,QAAQ;IAAEC,KAAK,EATxEC,eAAA;MAAAC,MAAA,EASmFxB,MAAA,CAAAyB,YAAY;IAAA;IAAWC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,UAAOF,OAAO,SAAPA,OAAO,IAAAE,IAAA;IAAGC,OAAK,G,0BATrIC,SAAA,KAAAF,IAAA,KAS6Id,QAAA,CAAAiB,UAAA,IAAAjB,QAAA,CAAAiB,UAAA,IAAAH,IAAA,CAAU,e,0BATvJE,SAAA,KAAAF,IAAA,KASqPd,QAAA,CAAAkB,iBAAA,IAAAlB,QAAA,CAAAkB,iBAAA,IAAAJ,IAAA,CAAiB,c;IAA5GK,eAAe,EAAC,MAAM;IAACC,SAAwB,EAAhBlC,MAAA,CAAAmC,eAAe;IAAGC,SAAO,EAAAT,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEd,QAAA,CAAAkB,iBAAA,IAAAlB,QAAA,CAAAkB,iBAAA,IAAAJ,IAAA,CAAiB;kDATrOS,UAAA,M,cAUQvC,mBAAA,CAAyP;IAVjQD,GAAA;IAUoBD,KAAK,EAAC,aAAa;IAACyB,EAAE,EAAC,QAAQ;IAAEC,KAAK,EAV1DC,eAAA;MAAAC,MAAA,EAUqExB,MAAA,CAAAyB,YAAY;IAAA;IAAWC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,UAAOF,OAAO,SAAPA,OAAO,IAAAE,IAAA;IAAGC,OAAK,G,0BAVvHC,SAAA,KAAAF,IAAA,KAU+Hd,QAAA,CAAAiB,UAAA,IAAAjB,QAAA,CAAAiB,UAAA,IAAAH,IAAA,CAAU,e,0BAVzIE,SAAA,KAAAF,IAAA,KAUwOd,QAAA,CAAAkB,iBAAA,IAAAlB,QAAA,CAAAkB,iBAAA,IAAAJ,IAAA,CAAiB,c;IAA7GK,eAAe,EAAC,OAAO;IAACC,SAAwB,EAAhBlC,MAAA,CAAAmC,eAAe;IAAGC,SAAO,EAAAT,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEd,QAAA,CAAAkB,iBAAA,IAAAlB,QAAA,CAAAkB,iBAAA,IAAAJ,IAAA,CAAiB;kDAVxNU,UAAA,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}