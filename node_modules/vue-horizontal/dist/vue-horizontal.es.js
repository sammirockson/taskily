var t=Object.assign;import{defineComponent as e,nextTick as o,h as l,createCommentVNode as n}from"vue";var i=e({name:"VueHorizontal",data:()=>({left:0,width:0,scrollWidth:0,hasPrev:!1,hasNext:!1,debounceId:void 0}),props:{button:{type:Boolean,default:()=>!0},buttonBetween:{type:Boolean,default:()=>!0},scroll:{type:Boolean,default:()=>!1},displacement:{type:Number,default:()=>1},snap:{type:String,default:()=>"start"}},mounted(){this.onScrollDebounce()},beforeDestroy(){clearTimeout(this.debounceId)},methods:{children(){return this.$refs.container.children},findPrevSlot(t){const e=this.children();for(let o=0;o<e.length;o++){const l=e[o].getBoundingClientRect();if(l.left<=t&&t<=l.right)return e[o];if(t<=l.left)return e[o]}},findNextSlot(t){const e=this.children();for(let o=0;o<e.length;o++){const l=e[o].getBoundingClientRect();if(!(l.right<=t)){if(l.left<=t)return e[o];if(t<=l.left)return e[o]}}},prev(t){t.stopPropagation(),this.$emit("prev");const e=this.$refs.container,o=e.getBoundingClientRect().left,l=o+e.clientWidth*-this.displacement-2.5,n=this.findPrevSlot(l);if(n){const t=n.getBoundingClientRect().left-o;return void this.scrollToLeft(e.scrollLeft+t)}const i=e.clientWidth*this.displacement;this.scrollToLeft(e.scrollLeft-i)},next(t){t.stopPropagation(),this.$emit("next");const e=this.$refs.container,o=e.getBoundingClientRect().left,l=o+e.clientWidth*this.displacement+2.5,n=this.findNextSlot(l);if(n){const t=n.getBoundingClientRect().left-o;if(t>2.5)return void this.scrollToLeft(e.scrollLeft+t)}const i=e.clientWidth*this.displacement;this.scrollToLeft(e.scrollLeft+i)},scrollToIndex(t){const e=this.children();if(e[t]){const o=this.$refs.container,l=e[t].getBoundingClientRect().left-o.getBoundingClientRect().left;this.scrollToLeft(o.scrollLeft+l)}},scrollToLeft(t,e="smooth"){this.$refs.container.scrollTo({left:t,behavior:e})},onScroll(){const t=this.$refs.container;t&&(this.$emit("scroll",{left:t.scrollLeft}),clearTimeout(this.debounceId),this.debounceId=setTimeout(this.onScrollDebounce,100))},onScrollDebounce(){return this.refresh((t=>{this.$emit("scroll-debounce",t)}))},refresh(t){return o((()=>{const e=this.calculate();this.left=e.left,this.width=e.width,this.scrollWidth=e.scrollWidth,this.hasNext=e.hasNext,this.hasPrev=e.hasPrev,null==t||t(e)}))},calculate(){const t=this.$refs.container,e=this.children()[0];return{left:t.scrollLeft,width:t.clientWidth,scrollWidth:t.scrollWidth,hasNext:t.scrollWidth>t.scrollLeft+t.clientWidth+2.5,hasPrev:function(){var o,l;if(0===t.scrollLeft)return!1;const n=t.getBoundingClientRect().left,i=null!=(l=null==(o=null==e?void 0:e.getBoundingClientRect())?void 0:o.left)?l:0;return Math.abs(n-i)>=2.5}()}}},render(){const e=t=>{const e=l("path",{d:"m9.8 12 5 5a1 1 0 1 1-1.4 1.4l-5.7-5.7a1 1 0 0 1 0-1.4l5.7-5.7a1 1 0 0 1 1.4 1.4l-5 5z"}),o=l("path",{d:"m14.3 12.1-5-5a1 1 0 0 1 1.4-1.4l5.7 5.7a1 1 0 0 1 0 1.4l-5.7 5.7a1 1 0 0 1-1.4-1.4l5-5z"});return l("svg",{class:"v-hl-svg",viewBox:"0 0 24 24","aria-label":`horizontal scroll area button for navigation to ${"prev"===t?"previous":"next"} section`,style:{width:"40px",height:"40px",margin:"6px",padding:"6px","border-radius":"20px","box-sizing":"border-box",background:"white",color:"black",fill:"currentColor","box-shadow":"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)"}},["prev"===t?e:o])},o=o=>this.button&&("prev"!==o||this.hasPrev)&&("next"!==o||this.hasNext)?l("div",{key:"prev"===o?0:1,class:`v-hl-btn v-hl-btn-${o}`,onClick:"prev"===o?this.prev:this.next,role:"button",style:t(t(t({},"prev"===o?{left:0,transform:this.buttonBetween?"translateX(-50%)":"none"}:{right:0,transform:this.buttonBetween?"translateX(50%)":"none"}),{cursor:"pointer",position:"absolute",top:0,bottom:0,display:"flex","align-self":"center","z-index":1,"align-items":"center"}),this.scroll?{}:{"overflow-x":"scroll","scrollbar-width":"none","-ms-overflow-style":"none","padding-bottom":"30px","margin-bottom":"-30px","clip-path":"inset(0 0 30px 0)"})},["prev"===o?this.$slots["btn-prev"]?this.$slots["btn-prev"]():e("prev"):this.$slots["btn-next"]?this.$slots["btn-next"]():e("next")]):n("",!0);return l("div",{class:"vue-horizontal",style:{position:"relative",display:"flex"}},[o("prev"),o("next"),l("div",{class:"v-hl-container",ref:"container",onScrollPassive:this.onScroll,style:t({display:"flex",width:"100%",margin:0,padding:0,border:"none","box-sizing":"content-box","overflow-x":"scroll","overflow-y":"hidden","scroll-snap-type":"x mandatory","-webkit-overflow-scrolling":"touch"},this.scroll?{}:{"scrollbar-width":"none","-ms-overflow-style":"none","padding-bottom":"30px","margin-bottom":"-30px","clip-path":"inset(0 0 30px 0)"})},(()=>{if(!this.$slots.default)return[];const t=t=>{t.props=t.props||{},t.props.style=t.props.style||{},t.props.style={"flex-shrink":0,"box-sizing":"border-box","min-height":"1px","scroll-snap-align":this.snap}},e=this.$slots.default();return e.forEach((e=>{if(e.el)return t(e);e.children&&Array.isArray(e.children)&&e.children.forEach((e=>{t(e)}))})),e})())])}});export default i;
